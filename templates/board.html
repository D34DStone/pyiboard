{% extends 'base.html' %}

{% block requirements %}
    {{ super() }}
    <link rel='stylesheet' type='text/css' href='/public/styles/post.css'>
    <link rel='stylesheet' type='text/css' href='/public/styles/board.css'>
{% endblock %}

{% block content %}
    <div id='thread-title'>
        <h1>{{ current_board.title }} - /{{ current_board.short }}/</h1>
        <img id='thread-title-pic' src='/public/board-images/{{ current_board.short }}.gif'>
    </div>

    <div class='title-link'>
        <a href='/{{ current_board.short }}/post_constructor?parent_post_id=-1'>[Создать тред]</a>
    </div>

    {% for post in posts %}
        <div class='post'>
            <a class='post-label'>>></a><div class='inline'>{{ post.head }} | </div>
            <div class='inline'>{{ post.created }} | </div>
            <div class='inline'>пост но. {{ post.id }} | </div>
            <div class='inline'><a href='/{{ current_board.short }}/thread/{{ post.id }}'>[к треду]</a></div>
            <div class='inline'><a href='/{{ current_board.short }}/post_constructor?parent_post_id={{ post.id }}'>[ответить]</a></div>
            {% for child_id in post.children_ids %}<a href='#' class='child-id inline'>[>>{{ child_id }}]</a>{% endfor %}
            <div class='files'>{% for filename in post.files %} <a href='{{ filename }}'><img src='{{ filename }}' class='file'></a> {% endfor %}</div>
            <div class='body'>
                {{ post.body }}
            </div>
        </div>

        {% for child_post in post.children %}
            <div class='child-post'>
                <a class='post-label'>>></a>
                <div class='inline'>{{ child_post.head }} | </div>
                <div class='inline'>{{ child_post.created }} | </div>
                <div class='inline'>пост но. {{ child_post.id }} | </div>
                <div class='inline'><a href='/{{ current_board.short }}/post_constructor?parent_post_id={{ child_post.id }}'>[ответить]</a></div>
                {% for child_id in child_post.children_ids %}<a href='#' class='child-id inline'>[>>{{ child_id }}]</a>{% endfor %}
                <div class='files'>{% for filename in child_post.files %} <a href='{{ filename }}'><img src='{{ filename }}' class='file'></a> {% endfor %}</div>
                <div class='body'>
                    <a href='#'>>>{{ child_post.parent_id }}</a><br>
                    {{ child_post.body }}
                </div>
            </div>
        {% endfor %}
    {% endfor %}
{% endblock %}